\usepackage{listings}
\lstset{
  language={C},
  basicstyle={\ttfamily\small},
  identifierstyle={\small},
  commentstyle={\small\it},
  tabsize=2,
  keywordstyle={\small\bfseries},
  ndkeywordstyle={\small},
  stringstyle={\small\ttfamily},
  breaklines=true,
  columns=[l]{fullflexible},
  numbers=left,
  xrightmargin=0zw,
  xleftmargin=3zw,
  numberstyle={\it \scriptsize},
  lineskip=-0.5ex
}

